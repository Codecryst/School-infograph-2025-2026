<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infographic: Phòng Chống Thiên Tai</title>
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Sử dụng font Inter từ Google Fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Style cho các icon SVG */
        .icon {
            width: 1.5rem; /* 24px */
            height: 1.5rem; /* 24px */
            flex-shrink: 0;
            margin-right: 0.75rem; /* 12px */
        }
        /* Animation cho spinner */
        .loader {
            border-top-color: #3498db;
            -webkit-animation: spin 1s linear infinite;
            animation: spin 1s linear infinite;
        }
        @-webkit-keyframes spin {
            0% { -webkit-transform: rotate(0deg); }
            100% { -webkit-transform: rotate(360deg); }
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        <!-- Tiêu đề chính -->
        <h1 class="text-3xl md:text-4xl font-bold text-center text-blue-800 mb-4">
            INFOGRAPHIC: PHÒNG CHỐNG THIÊN TAI
        </h1>
        <p class="text-lg text-center text-gray-600 mb-10">
            Các bước quan trọng để Chuẩn bị, Ứng phó và Phục hồi sau thiên tai.
        </p>

        <!-- Lưới 3 cột cho 3 giai đoạn -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

            <!-- Giai đoạn 1: TRƯỚC KHI XẢY RA (Chuẩn bị) -->
            <div class="bg-yellow-50 border-l-4 border-yellow-400 rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-yellow-800 mb-6 flex items-center">
                    <!-- Icon Tiêu đề -->
                    <svg class="icon text-yellow-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    TRƯỚC KHI THIÊN TAI
                </h2>
                <ul class="space-y-4">
                    <!-- Mục 1: Theo dõi thông tin -->
                    <li class="flex items-start">
                        <svg class="icon text-yellow-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Theo dõi thông tin</h3>
                            <p class="text-sm text-gray-700">Theo dõi cảnh báo chính thức từ TV, radio, hoặc ứng dụng cảnh báo của chính quyền.</p>
                        </div>
                    </li>
                    <!-- Mục 2: Chuẩn bị túi khẩn cấp -->
                    <li class="flex items-start">
                        <svg class="icon text-yellow-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Túi đồ khẩn cấp</h3>
                            <p class="text-sm text-gray-700">Chuẩn bị nước uống, thực phẩm khô, thuốc men, đèn pin, pin dự phòng và các giấy tờ quan trọng.</p>
                        </div>
                    </li>
                    <!-- Mục 3: Gia cố nhà cửa -->
                    <li class="flex items-start">
                        <svg class="icon text-yellow-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Gia cố nhà cửa</h3>
                            <p class="text-sm text-gray-700">Chằng chống mái nhà, cửa ra vào, cửa sổ. Di chuyển các vật dụng quan trọng lên cao.</p>
                        </div>
                    </li>
                    <!-- Mục 4: Kế hoạch sơ tán -->
                    <li class="flex items-start">
                        <svg class="icon text-yellow-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                             <path stroke-linecap="round" stroke-linejoin="round" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l5.447 2.724a1 1 0 001.553-.894V5.618a1 1 0 00-1.553-.894L15 7m0 10V7m0 10l-6 3" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Kế hoạch sơ tán</h3>
                            <p class="text-sm text-gray-700">Biết rõ các tuyến đường sơ tán và nơi trú ẩn an toàn do chính quyền địa phương chỉ định.</p>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Giai đoạn 2: TRONG KHI XẢY RA (Ứng phó) -->
            <div class="bg-red-50 border-l-4 border-red-400 rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-red-800 mb-6 flex items-center">
                    <!-- Icon Tiêu đề -->
                    <svg class="icon text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                    TRONG KHI THIÊN TAI
                </h2>
                <ul class="space-y-4">
                    <!-- Mục 1: Ở nơi an toàn -->
                    <li class="flex items-start">
                        <svg class="icon text-red-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 11V7a4 4 0 118 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Ở nơi an toàn</h3>
                            <p class="text-sm text-gray-700">Ở yên trong nhà hoặc nơi trú ẩn. Tránh xa cửa sổ, cửa kính và các vật dụng có thể rơi vỡ.</p>
                        </div>
                    </li>
                    <!-- Mục 2: Ngắt điện/gas -->
                    <li class="flex items-start">
                        <svg class="icon text-red-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Ngắt các tiện ích</h3>
                            <p class="text-sm text-gray-700">Ngắt cầu dao điện, van gas và khóa nguồn nước để tránh chập điện, rò rỉ hoặc ô nhiễm.</p>
                        </div>
                    </li>
                    <!-- Mục 3: Không đi vào vùng ngập -->
                    <li class="flex items-start">
                        <svg class="icon text-red-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Tránh vùng nước ngập</h3>
                            <p class="text-sm text-gray-700">Tuyệt đối không lội qua, bơi lội hoặc lái xe qua vùng nước đang ngập lụt hoặc chảy xiết.</p>
                        </div>
                    </li>
                    <!-- Mục 4: Di chuyển lên cao -->
                    <li class="flex items-start">
                        <svg class="icon text-red-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Di chuyển lên cao</h3>
                            <p class="text-sm text-gray-700">Nếu có lũ lụt hoặc sạt lở, hãy di chuyển ngay lập tức đến vùng đất cao hơn hoặc tầng trên của nhà.</p>
                        </div>
                    </li>
                </ul>
            </div>

            <!-- Giai đoạn 3: SAU KHI XẢY RA (Phục hồi) -->
            <div class="bg-blue-50 border-l-4 border-blue-400 rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-blue-800 mb-6 flex items-center">
                    <!-- Icon Tiêu đề -->
                    <svg class="icon text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    SAU KHI THIÊN TAI
                </h2>
                <ul class="space-y-4">
                    <!-- Mục 1: Chờ thông báo an toàn -->
                    <li class="flex items-start">
                        <svg class="icon text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.144-6.432A1.76 1.76 0 003.779 12.33L1.056 12.33c-.56 0-.968-.582-.75-1.116l2.144-6.432A1.76 1.76 0 015.221 3.5h5.564a1.76 1.76 0 011.76 1.76v.622z" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Đợi thông báo an toàn</h3>
                            <p class="text-sm text-gray-700">Chỉ trở về nhà hoặc ra ngoài khi chính quyền thông báo khu vực đã an toàn.</p>
                        </div>
                    </li>
                    <!-- Mục 2: Tránh dây điện -->
                    <li class="flex items-start">
                        <svg class="icon text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Cẩn thận điện và mảnh vỡ</h3>
                            <p class="text-sm text-gray-700">Tránh xa các đường dây điện bị đứt, các tòa nhà bị hư hỏng nặng và các mảnh vỡ sắc nhọn.</p>
                        </div>
                    </li>
                    <!-- Mục 3: Kiểm tra thương tích -->
                    <li class="flex items-start">
                        <svg class="icon text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547a2 2 0 00-.547 1.806l.477 2.387a6 6 0 00.517 3.86l.158.318a6 6 0 00.517 3.86l2.387.477a2 2 0 001.806-.547a2 2 0 00.547-1.806l-.477-2.387a6 6 0 00-.517-3.86l-.158-.318a6 6 0 01-.517-3.86l-.477-2.387a2 2 0 01.547-1.806z" />
                             <path stroke-linecap="round" stroke-linejoin="round" d="M4.572 15.428a2 2 0 00-.547 1.806l.477 2.387a6 6 0 00.517 3.86l.158.318a6 6 0 00.517 3.86l2.387.477a2 2 0 001.806-.547a2 2 0 00.547-1.806l-.477-2.387a6 6 0 00-.517-3.86l-.158-.318a6 6 0 01-.517-3.86l-.477-2.387a2 2 0 00-1.806-.547z" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Kiểm tra thương tích</h3>
                            <p class="text-sm text-gray-700">Kiểm tra bản thân và những người xung quanh xem có bị thương không. Thực hiện sơ cứu nếu cần.</p>
                        </div>
                    </li>
                    <!-- Mục 4: Vệ sinh/Nước sạch -->
                    <li class="flex items-start">
                        <svg class="icon text-blue-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.523 5.754 19 7.5 19s3.332-.477 4.5-1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.523 18.246 19 16.5 19s-3.332-.477-4.5-1.253" />
                        </svg>
                        <div>
                            <h3 class="font-semibold">Đảm bảo vệ sinh</h3>
                            <p class="text-sm text-gray-700">Chỉ sử dụng nước sạch đã được khử trùng. Ăn chín, uống sôi và dọn dẹp vệ sinh để phòng chống dịch bệnh.</p>
                        </div>
                    </li>
                </ul>
            </div>

        </div>

        <!-- Chú thích khẩn cấp -->
        <div class="mt-10 text-center bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-bold text-gray-800 mb-2">SỐ ĐIỆN THOẠI KHẨN CẤP</h3>
            <p class="text-lg text-gray-600">Luôn ghi nhớ các số điện thoại cứu hộ, cứu nạn tại địa phương của bạn.</p>
            <div class="flex justify-center space-x-6 mt-4 text-lg font-semibold">
                <span class="text-red-600">113: Cảnh sát</span>
                <span class="text-red-600">114: Cứu hỏa / Cứu nạn</span>
                <span class="text-red-600">115: Cấp cứu</span>
            </div>
        </div>

        <!-- *** TÍNH NĂNG MỚI CỦA GEMINI API *** -->
        <div class="mt-10 bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-2xl font-bold text-purple-800 mb-4 flex items-center">
                <span class="text-3xl mr-2">✨</span> Kế hoạch An toàn Cá nhân (AI-Powered)
            </h2>
            <p class="text-gray-600 mb-4">
                Mô tả tình huống của bạn (ví dụ: "Tôi ở nhà một mình, có bão sắp vào", "Nhà tôi ở vùng trũng, có 2 con nhỏ") để nhận được các bước hành động cụ thể.
            </p>
            
            <textarea id="userPrompt" class="w-full h-24 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Nhập tình huống của bạn ở đây..."></textarea>
            
            <button id="generateButton" class="mt-4 w-full bg-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition duration-300 flex items-center justify-center">
                Tạo Kế hoạch
            </button>
            
            <div id="loadingSpinner" class="hidden mt-6 flex justify-center items-center">
                <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12"></div>
                <span class="ml-3 text-gray-600">Gemini đang suy nghĩ...</span>
            </div>

            <div id="apiErrorMessage" class="hidden mt-4 p-3 bg-red-100 text-red-700 border border-red-300 rounded-lg">
                Đã xảy ra lỗi. Vui lòng thử lại sau.
            </div>

            <div id="apiResult" class="mt-6 p-4 bg-purple-50 border-l-4 border-purple-300 rounded-r-lg prose" style="white-space: pre-wrap;">
                <!-- Kết quả từ AI sẽ xuất hiện ở đây -->
            </div>
        </div>
        <!-- *** KẾT THÚC TÍNH NĂNG MỚI *** -->

    </div>

    <!-- *** SCRIPT GỌI GEMINI API *** -->
    <script type="module">
        const generateButton = document.getElementById('generateButton');
        const userPromptInput = document.getElementById('userPrompt');
        const apiResultDiv = document.getElementById('apiResult');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const apiErrorMessage = document.getElementById('apiErrorMessage');

        const API_KEY = ""; // Để trống, Canvas sẽ tự động cung cấp
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;
        
        const SYSTEM_PROMPT = `Bạn là một chuyên gia về phòng chống thiên tai tại Việt Nam. 
Nhiệm vụ của bạn là đưa ra lời khuyên an toàn dựa trên tình huống cụ thể của người dùng.
Hãy trả lời bằng tiếng Việt.
Sử dụng các gạch đầu dòng (dùng dấu -) để liệt kê các hành động.
Câu trả lời phải ngắn gọn, rõ ràng, thực tế và tập trung vào những hành động quan trọng nhất.
Ví dụ:
- Giữ bình tĩnh và ở yên trong nhà.
- Tránh xa cửa sổ và các vật bằng kính.
- Chuẩn bị sẵn túi đồ khẩn cấp.`;

        generateButton.addEventListener('click', async () => {
            const userPrompt = userPromptInput.value;
            if (!userPrompt) {
                apiResultDiv.textContent = "Vui lòng nhập tình huống của bạn.";
                return;
            }

            // Hiển thị loading và ẩn các phần khác
            loadingSpinner.classList.remove('hidden');
            apiResultDiv.classList.add('hidden');
            apiResultDiv.textContent = "";
            apiErrorMessage.classList.add('hidden');
            generateButton.disabled = true;
            generateButton.textContent = "Đang tạo...";

            try {
                const generatedText = await callGeminiAPI(userPrompt);
                apiResultDiv.textContent = generatedText;
            } catch (error) {
                console.error("Lỗi khi gọi API:", error);
                apiErrorMessage.classList.remove('hidden');
            } finally {
                // Ẩn loading và hiển thị kết quả
                loadingSpinner.classList.add('hidden');
                apiResultDiv.classList.remove('hidden');
                generateButton.disabled = false;
                generateButton.textContent = "Tạo Kế hoạch";
            }
        });

        async function callGeminiAPI(userPrompt, retries = 3, delay = 1000) {
            const payload = {
                contents: [{
                    parts: [{ text: userPrompt }]
                }],
                systemInstruction: {
                    parts: [{ text: SYSTEM_PROMPT }]
                }
            };

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.strin
